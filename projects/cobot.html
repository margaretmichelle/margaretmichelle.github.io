<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Margaret Lee | TMS Cobot</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="projects.css">
    <link rel="stylesheet" href="svg.css">
    <link rel="stylesheet" href="https://necolas.github.io/normalize.css/8.0.1/normalize.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
          <!-- <span class="menu-toggle">&#9776;</span> -->
          <ul class="nav-links">
            <li><a href="../index.html#home" class="nav-item">Home</a></li>
            <li><a href="../index.html#about" class="nav-item">About</a></li>
            <li><a href="../index.html#projects" class="nav-item">Projects</a></li>
            <li><a href="../resume.html" class="nav-item">Resume</a></li>
            <li><a href="https://www.linkedin.com/in/lee-margaret/" class=""nav-item>
              <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
                <path
                class="linkedin-svg"
                d="M20 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM8.339 18.337H5.667v-8.59h2.672v8.59zM7.003 8.574a1.548 1.548 0 1 1 0-3.096 1.548 1.548 0 0 1 0 3.096zm11.335 9.763h-2.669V14.16c0-.996-.018-2.277-1.388-2.277-1.39 0-1.601 1.086-1.601 2.207v4.248h-2.667v-8.59h2.56v1.174h.037c.355-.675 1.227-1.387 2.524-1.387 2.704 0 3.203 1.778 3.203 4.092v4.71z"/>
              </svg>
              </a>
            </li>
          </ul>
        </div>
      </nav>

    <main>
        <div class="wrapper">
            <div class="grid-container">
                <div class="header">
                    <h1>TMS Cobot</h1>
                    <p>| ENPH 459 | 2023-2024 |</p>
                </div>
                <aside class="project-svg">
                    <svg class="cobot-svg" viewBox="0 0 36 20" xmlns="http://www.w3.org/2000/svg">
                        <path class="base" d="M.2 19a5 1 0 006.6-.1v-1.1l-.9-2.9v-4.1h-4.7v4.1l-1 2.9v1.2"/>
                        <g class="forearm-group">
                            <path class="forearm" d="M14.8 1.8l1.4 1.4v.4l4.3 3.5.3-.1 2.7 2.1-2.2 2.6-2.7-2.2.1-.3-4.2-3.4-.4 0-1.8-1.8 2.5-2.2"/>
                            <g class="wrist-group">
                                <path class="wrist" d="M20.5 11.3v-4.4a1 5 0 00.7-3.5h3.8a1 3 0 010 3.5h-1.1v4.4h-3.4"/>
                                <path class="wristcaps" d="M20.5 11.3a3 1 0 013.4 0v.9h-3.4v-.9 M21.2 3.4h-1.2a1 3 0 00-.3 3.1l.8.4a1 5 0 00.7-3.5"/>
                                <path class="hand" d="M25 3.4h2.1a1 3 0 010 3.5h-2.1a1 3 0 000-3.5" />
                                <path class="eye" d="M26.3 4.2a.1.1 0 00.7 0 .1.1 0 00-.7 0"/>
                            </g>
                        </g>
                        <g class="arm-group">
                            <path class="arm" d="M1.7 8.9l2.2-1.9h.9l4.6-3.9v-.4l1.8-1.6 2.9 3-2 1.7h-.4l-4.6 3.9v.9l-3 2.6-2.4-4.3"/>
                            <path class="elbow" d="M15.3 2.2a1 1 0 00-4.5-.1 1 1 0 004.5.1"/>
                            <path class="shoulder" d="M2.6 8.6a1 1 0 000 5.2 1 1 0 000-5.2"/>
                        </g>
                    </svg>
                </aside>
                <div class="summary-box">
                    <h4>Overview:</h4> <p>We developed a robotic system designed to compensate for patient movement while stimulating the brain with a 
                        transcranial magentic stimulation (TMS) coil for our 4th year capstone project. TMS is a procedure wherein magnetic flieds 
                        are used to induce electrical stimulation of brain cells. It can be used to treat depression and requires careful placement 
                        of the coil to target the desired regions of the brain. As such, robotic integration to aid in positioning and compensation can 
                        improve treatment efficacy. Using my knowledge of robot dynamics learned from ETH Zurich, I programmed a cobot arm in Python to 
                        follow a surrogate patient's head in 6 degrees of freedom using fiducial markers and an IR stereo camera.
                    </p>
                </div>
                <div class="keywords-box">
                    <span class="keyword-tag">UR3e robot arm</span>
                    <span class="keyword-tag">Python</span>
                    <span class="keyword-tag">ROS</span>
                    <span class="keyword-tag">OptiTrack camera + Motive</span>
                    <span class="keyword-tag">Force/Torque sensor</span>
                    <span class="keyword-tag">Signal processing</span>
                    <span class="keyword-tag">Linux</span>
                </div>
                <div class="main-content">

                    <div class="p-image-container">
                        <img src="../images/cobot2.png" alt="Cobot with TMS coil and handheld patient stand-in with markers" class="portfolio-image">
                    </div>
                    <figcaption>Cobot with TMS coil and handheld patient stand-in with IR reflective markers</figcaption>
  
                    <p>
                        Transcranial Magnetic Stimulation (TMS) is a non-invasive medical procedure wherein certain regions of the brain are stimulated by a magnetic field 
                        to induce electrical activity in neurons. This is typically used to treat depression. Sponsored by the NINET lab at UBC Department of Psychiatry, 
                        my team of four Engineering Physics students worked to develop a system to automate the procedure to increase the precision of stimulation. The main 
                        issue we tackled was compensating for small movements of the patient during treatment that can misalign the TMS coil providing treatment 
                        and the target region in the brain determined by digital MRI mapping. Using a Universal Robots collaborative robot (cobot) arm, ROS, 
                        Python, and an OptiTrack camera paired with Motive, we were successfully able to follow the linear and rotational movement of a surrogate 
                        patient head.
                    </p>

                    <div class="p-image-container">
                        <img src="../images/cobot4.gif" alt="GIF of cobot arm following patient stand-in with markers" class="portfolio-image">
                    </div>
                    <figcaption>Cobot arm following the markers using (offscreen) IR camera</figcaption>
                    <p>
                        The OptiTrack stereo camera identifies the position of "rigid bodies" using three IR reflective markers. We tranformed the position and orientation  
                        of the "patient" from image space (the camera coordinate system) to robot space (the cobot's base coordinate system) using a series of three-dimensional 
                        affine transformations. We determined the difference, or the error, between the current cobot pose and the desired robot pose based on where the 
                        "patient" is. A PD (proportional and derivative) control algorithm was used to control the linear and angular velocity of the TMS coil on the end of 
                        the cobot arm. We also explored using the integrated force/torque sensor to maintain a constant, light pressure on the "patient head" and to implement 
                        safety measures.
                    </p>

                    <div class="p-image-container">
                        <img src="../images/cobot5.gif" alt="GIF of Motive software with camera tracking patient head" class="portfolio-image">
                    </div>
                    <figcaption>Motive software tracking Ernie, our "patient head"</figcaption>

                    <div class="p-image-container">
                        <video width="auto" height="450px" controls class="portfolio-video">
                            <source src="../images/cobot8.mov" type="video/mp4">
                        Your browser does not support the video tag.
                        </video>
                    </div>
                    <figcaption>Cobot maintaining a constant force feedback</figcaption>

                    <div class="p-image-container">
                        <img src="../images/cobot3.png" alt="Capstone team with camera, robot, TMS coil setup at project fair" class="portfolio-image">
                    </div>
                    <figcaption>My capstone team at the project fair showcasing our system</figcaption>
                </div>
                <aside class="sidebar">
                    <a href="enph353.html" class="next-project-btn">
                        &rarr;
                    </a>
                </aside>
            </div>
        </div>
    </main>

    <!-- Footer Section -->
    <footer id="footer">
        <div class="footer-content">
            <p>Made by Margaret 2025</p>
        </div>
      </footer>

  </body>
  </html>